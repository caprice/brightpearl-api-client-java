<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_25) on Tue May 27 23:47:05 BST 2014 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>ConstantWaitRateLimiter (uk.co.visalia.brightpearl:api-client 1.0.0 API)</title>
<meta name="date" content="2014-05-27">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ConstantWaitRateLimiter (uk.co.visalia.brightpearl:api-client 1.0.0 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ConstantWaitRateLimiter.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../../../uk/co/visalia/brightpearl/apiclient/ratelimit/NoOpRateLimiter.html" title="class in uk.co.visalia.brightpearl.apiclient.ratelimit"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?uk/co/visalia/brightpearl/apiclient/ratelimit/ConstantWaitRateLimiter.html" target="_top">Frames</a></li>
<li><a href="ConstantWaitRateLimiter.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">uk.co.visalia.brightpearl.apiclient.ratelimit</div>
<h2 title="Class ConstantWaitRateLimiter" class="title">Class ConstantWaitRateLimiter</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>uk.co.visalia.brightpearl.apiclient.ratelimit.ConstantWaitRateLimiter</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../uk/co/visalia/brightpearl/apiclient/ratelimit/RateLimiter.html" title="interface in uk.co.visalia.brightpearl.apiclient.ratelimit">RateLimiter</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">ConstantWaitRateLimiter</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../../../uk/co/visalia/brightpearl/apiclient/ratelimit/RateLimiter.html" title="interface in uk.co.visalia.brightpearl.apiclient.ratelimit">RateLimiter</a></pre>
<div class="block"><p>
 A very basic implementation of <a href="../../../../../../uk/co/visalia/brightpearl/apiclient/ratelimit/RateLimiter.html" title="interface in uk.co.visalia.brightpearl.apiclient.ratelimit"><code>RateLimiter</code></a> that will reduce the
 throughput of requests by pausing for the minimum period required to ensure the cap is not exceeded. By default this
 is 300 ms. Each calling thread is blocked until the request may be sent, so this is not suitable for use as a queue.
 </p><p>
 If there is more than one server making requests to the same Brightpearl account, this approach will only be effective
 if this class is configured with a 1/n share of the request cap, which increases latency for all requests, however a
 distributed tracking approach may be more appropriate.
 </p><p>
 This class is intended to prevent hitting the request cap for an account, and its behaviour is not affected by an
 account unexpectedly being throttled.
 </p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../uk/co/visalia/brightpearl/apiclient/ratelimit/ConstantWaitRateLimiter.html#ConstantWaitRateLimiter()">ConstantWaitRateLimiter</a></strong>()</code>
<div class="block">Construct a constant wait rate limiter with the default settings, limiting requests to 200 per minute.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../../../uk/co/visalia/brightpearl/apiclient/ratelimit/ConstantWaitRateLimiter.html#ConstantWaitRateLimiter(int, int, java.util.concurrent.TimeUnit)">ConstantWaitRateLimiter</a></strong>(int&nbsp;cap,
                       int&nbsp;period,
                       <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;periodUnit)</code>
<div class="block">Construct a constant wait limiter with a custom rate limit.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../uk/co/visalia/brightpearl/apiclient/ratelimit/ConstantWaitRateLimiter.html#rateLimit(uk.co.visalia.brightpearl.apiclient.account.Account)">rateLimit</a></strong>(<a href="../../../../../../uk/co/visalia/brightpearl/apiclient/account/Account.html" title="class in uk.co.visalia.brightpearl.apiclient.account">Account</a>&nbsp;account)</code>
<div class="block">Called before a request is made, this sleeps for the minimum amount of time that must be left to ensure no more
 than the maximum number of requests are made in the configured period.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../uk/co/visalia/brightpearl/apiclient/ratelimit/ConstantWaitRateLimiter.html#requestCapExceeded(uk.co.visalia.brightpearl.apiclient.account.Account)">requestCapExceeded</a></strong>(<a href="../../../../../../uk/co/visalia/brightpearl/apiclient/account/Account.html" title="class in uk.co.visalia.brightpearl.apiclient.account">Account</a>&nbsp;account)</code>
<div class="block">This implementation does nothing.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../uk/co/visalia/brightpearl/apiclient/ratelimit/ConstantWaitRateLimiter.html#requestCompleted(uk.co.visalia.brightpearl.apiclient.account.Account, int, long)">requestCompleted</a></strong>(<a href="../../../../../../uk/co/visalia/brightpearl/apiclient/account/Account.html" title="class in uk.co.visalia.brightpearl.apiclient.account">Account</a>&nbsp;account,
                int&nbsp;requestsRemaining,
                long&nbsp;nextThrottlePeriod)</code>
<div class="block">This implementation does nothing.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ConstantWaitRateLimiter()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ConstantWaitRateLimiter</h4>
<pre>public&nbsp;ConstantWaitRateLimiter()</pre>
<div class="block">Construct a constant wait rate limiter with the default settings, limiting requests to 200 per minute. This is
 suitable for a single node system.</div>
</li>
</ul>
<a name="ConstantWaitRateLimiter(int, int, java.util.concurrent.TimeUnit)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ConstantWaitRateLimiter</h4>
<pre>public&nbsp;ConstantWaitRateLimiter(int&nbsp;cap,
                       int&nbsp;period,
                       <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;periodUnit)</pre>
<div class="block">Construct a constant wait limiter with a custom rate limit. Avoid low rates as this will cause high latency
 during busy periods.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cap</code> - The number of requests allowed in the given period.</dd><dd><code>period</code> - The period of time.</dd><dd><code>periodUnit</code> - Unit of the period of time.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="rateLimit(uk.co.visalia.brightpearl.apiclient.account.Account)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rateLimit</h4>
<pre>public&nbsp;void&nbsp;rateLimit(<a href="../../../../../../uk/co/visalia/brightpearl/apiclient/account/Account.html" title="class in uk.co.visalia.brightpearl.apiclient.account">Account</a>&nbsp;account)</pre>
<div class="block">Called before a request is made, this sleeps for the minimum amount of time that must be left to ensure no more
 than the maximum number of requests are made in the configured period. With default configuration, the maximum
 wait will be 300ms to give a rate of 200 per minute. If more than 300ms has passed since the previous request,
 the wait will be zero.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../uk/co/visalia/brightpearl/apiclient/ratelimit/RateLimiter.html#rateLimit(uk.co.visalia.brightpearl.apiclient.account.Account)">rateLimit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../uk/co/visalia/brightpearl/apiclient/ratelimit/RateLimiter.html" title="interface in uk.co.visalia.brightpearl.apiclient.ratelimit">RateLimiter</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>account</code> - The account a request is about to be sent to.</dd></dl>
</li>
</ul>
<a name="requestCompleted(uk.co.visalia.brightpearl.apiclient.account.Account, int, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>requestCompleted</h4>
<pre>public&nbsp;void&nbsp;requestCompleted(<a href="../../../../../../uk/co/visalia/brightpearl/apiclient/account/Account.html" title="class in uk.co.visalia.brightpearl.apiclient.account">Account</a>&nbsp;account,
                    int&nbsp;requestsRemaining,
                    long&nbsp;nextThrottlePeriod)</pre>
<div class="block">This implementation does nothing.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../uk/co/visalia/brightpearl/apiclient/ratelimit/RateLimiter.html#requestCompleted(uk.co.visalia.brightpearl.apiclient.account.Account, int, long)">requestCompleted</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../uk/co/visalia/brightpearl/apiclient/ratelimit/RateLimiter.html" title="interface in uk.co.visalia.brightpearl.apiclient.ratelimit">RateLimiter</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>account</code> - The account a response has been received from.</dd><dd><code>requestsRemaining</code> - The value of the brightpearl-requests-remaining response header.</dd><dd><code>nextThrottlePeriod</code> - The value of the brightpearl-next-throttle-period header.</dd></dl>
</li>
</ul>
<a name="requestCapExceeded(uk.co.visalia.brightpearl.apiclient.account.Account)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>requestCapExceeded</h4>
<pre>public&nbsp;void&nbsp;requestCapExceeded(<a href="../../../../../../uk/co/visalia/brightpearl/apiclient/account/Account.html" title="class in uk.co.visalia.brightpearl.apiclient.account">Account</a>&nbsp;account)</pre>
<div class="block">This implementation does nothing. Use of this class should prevent the request cap being reached, and it does
 not modify its constant wait behaviour if the request cap is unexpectedly hit.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../uk/co/visalia/brightpearl/apiclient/ratelimit/RateLimiter.html#requestCapExceeded(uk.co.visalia.brightpearl.apiclient.account.Account)">requestCapExceeded</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../uk/co/visalia/brightpearl/apiclient/ratelimit/RateLimiter.html" title="interface in uk.co.visalia.brightpearl.apiclient.ratelimit">RateLimiter</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>account</code> - The account that received a 503 request cap error.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ConstantWaitRateLimiter.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../../../uk/co/visalia/brightpearl/apiclient/ratelimit/NoOpRateLimiter.html" title="class in uk.co.visalia.brightpearl.apiclient.ratelimit"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?uk/co/visalia/brightpearl/apiclient/ratelimit/ConstantWaitRateLimiter.html" target="_top">Frames</a></li>
<li><a href="ConstantWaitRateLimiter.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2014. All Rights Reserved.</small></p>
</body>
</html>
